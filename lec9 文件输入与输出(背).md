# 1.二进制文件
## 1.1 文本 vs 二进制：性能
文本文件无非是用最简单的方式可以读写的文件，而二进制文件是需要专门的程序来读写的文件

文本：(存储的是字符数据，通常是人类可读的，一个字节一个字符)
	优点：方便人类读写，而且跨平台
	缺点：程序输入输出要经过格式化，开销大
二进制文件：
	优点：程序读写快
	缺点：是人类读写困难，而且不跨平台
	int的大小不一致，大小端的问题
# 2.文件的输入输出
## 2.1 文件读写的标准代码
```c
FILE*fp = fopen("file",“r”);//打开文件
if (fp){//确保打开
fscanf(fp,...);//读写文件
...
fclose(fp);//关闭文件
}
else{//错误打印操作
...
}
```
## 2.2 FILE
### 2.2.1 fopen
![[Pasted image 20240604164305.png]]
`FILE* fopen("文件地址”,“读写模式");`
### 2.2.2 fprintf与fscanf读写文本文件
`fprintf(文件指针，格式字符串，输出表列)程序输出到文件(文件是外部)
```c
fprintf(fp,"%d,%6.2f",i,f);//将int型变量i和float型变量f的值按%d和%6.2f的格式输出到fp指向的文件中
```

`fscanf(文件指针, 格式字符串, 输出表列);`文件输出到程序
```c
fscanf (fp,″%d,%f″,&i,&f);
//磁盘文件上如果有字符“3,4.5” ，则从中读取整数3送给整型变量i，读取实数
4.5送给float型变量f
```

### 2.2.3 fread与fwrite读写二进制文件
`fread(buffer, size, count, fp);`
`fwrite(buffer, size, count, fp);`
注释：
1. buffer： 是一个地址。**正常用一个数组名作为地址**
	对fread，它是用来存放从文件读入的数据的存储区地址。
	对fwrite，是要把此地址开始的存储区中的数据向文件输出（以上指的是起始地址）。
2. size：要读写的字节数。
3. count： 要读写多少个数据项(每个数据项长度为size)。
4. fp：FILE类型指针。
```c
float f[10];
fread(f,4,10,fp); //从fp所指向的文件读入10个4个字节的数据，存储到数组f中
```
**注意**
**buffer地址**无需指定基类型，因为fread和fwrite在进行操作时是直接无视类型，直接转移的
注意FILE指针是最后一个参数

## 2.3 随机读写数据文件
问题：为什么要随机读写？
* 文件进行顺序读写容易理解，容易操作，但效率不高。
* 随机访问不是按数据在文件中的物理位置次序进行读写，而是可以对任何位置上的数据进行访问，对于特定的任务显然这种方法比顺序访问效率高得多。
### 2.3.1 文件位置标记及其定位
为了对读写进行控制，系统为每个文件设置了一个文件读写位置标记(简称文件位置标记或文件标记)，
用来指示“接下来要读写的下一个字符的位置”

### 2.3.2 具体代码
`ftell(文件指针)` 获取当前文件指针的位置。
`rewind(文件指针)` 将文件指针重置到文件的开头

`fseek(文件指针, 位移量, 起始点);`
“起始点”：用0、1或2代替
	0代表“文件头”，
	1代表“当前位置”，
	2代表“文件尾”
“位移量”：指以“起始点”为基准，向后移动的字节数（长整型）
```c
fseek (fp,100L,0);//将文件位置标记向后移到离文件开头100个字节处
fseek (fp,50L,1);//将文件位置标记向后移到离当前位置50个字节处
fseek (fp,-10L,2);//将文件位置标记从文件末尾处向前移动10个字节
```
